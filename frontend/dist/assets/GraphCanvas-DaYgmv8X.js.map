{"version":3,"file":"GraphCanvas-DaYgmv8X.js","sources":["../../graphing/graphMath.js","../../graphing/graphStore.js","../../graphing/GraphToolbar.js","../../graphing/GraphCanvas.js"],"sourcesContent":["const DEFAULT_MAX_DECIMALS = 3;\r\n\r\nconst clampDecimals = value => {\r\n  if (!Number.isFinite(value)) return value;\r\n  const threshold = 10 ** DEFAULT_MAX_DECIMALS;\r\n  return Math.round((value + Number.EPSILON) * threshold) / threshold;\r\n};\r\n\r\nconst roundValue = (value, decimals = DEFAULT_MAX_DECIMALS) => {\r\n  if (value === null || value === undefined || Number.isNaN(value)) return null;\r\n  const factor = 10 ** decimals;\r\n  return Math.round((value + Number.EPSILON) * factor) / factor;\r\n};\r\n\r\nconst formatNumber = (value, decimals = DEFAULT_MAX_DECIMALS) => {\r\n  const rounded = roundValue(value, decimals);\r\n  if (rounded === null) return '—';\r\n  if (!Number.isFinite(rounded)) return rounded > 0 ? '∞' : rounded < 0 ? '-∞' : '∞';\r\n  return Number(rounded).toFixed(Math.min(decimals, DEFAULT_MAX_DECIMALS)).replace(/\\.0+$/, '');\r\n};\r\n\r\nconst distance = (a, b) => {\r\n  if (!a || !b) return null;\r\n  const dx = b.x - a.x;\r\n  const dy = b.y - a.y;\r\n  return Math.hypot(dx, dy);\r\n};\r\n\r\nconst slopeBetweenPoints = (a, b) => {\r\n  if (!a || !b) return null;\r\n  const dx = b.x - a.x;\r\n  const dy = b.y - a.y;\r\n  if (Math.abs(dx) < 1e-9) return Infinity;\r\n  return dy / dx;\r\n};\r\n\r\nconst slopeInterceptFromPoints = (a, b) => {\r\n  if (!a || !b) return { slope: null, intercept: null };\r\n  const slope = slopeBetweenPoints(a, b);\r\n  if (!Number.isFinite(slope)) {\r\n    return { slope: Infinity, intercept: null, verticalX: a.x };\r\n  }\r\n  const intercept = a.y - slope * a.x;\r\n  return { slope, intercept, verticalX: null };\r\n};\r\n\r\nconst xIntercept = ({ slope, intercept, verticalX }) => {\r\n  if (verticalX !== null && verticalX !== undefined) return verticalX;\r\n  if (!Number.isFinite(slope)) return null;\r\n  if (Math.abs(slope) < 1e-9) return null;\r\n  return -intercept / slope;\r\n};\r\n\r\nconst yIntercept = ({ slope, intercept, verticalX }) => {\r\n  if (verticalX !== null && verticalX !== undefined) return null;\r\n  return intercept;\r\n};\r\n\r\nconst evaluateLinear = (coeffs, x) => {\r\n  if (coeffs.verticalX !== null && coeffs.verticalX !== undefined) {\r\n    return null;\r\n  }\r\n  return coeffs.slope * x + coeffs.intercept;\r\n};\r\n\r\nconst evaluateQuadratic = (coeffs, x) => {\r\n  const { a = 1, b = 0, c = 0 } = coeffs;\r\n  return a * x * x + b * x + c;\r\n};\r\n\r\nconst evaluateAbsolute = (coeffs, x) => {\r\n  const { a = 1, h = 0, k = 0 } = coeffs;\r\n  return a * Math.abs(x - h) + k;\r\n};\r\n\r\nconst evaluateFunctionAt = (definition, x) => {\r\n  if (!definition) return null;\r\n  switch (definition.subtype) {\r\n    case 'linear':\r\n      return evaluateLinear(definition.coefficients, x);\r\n    case 'quadratic':\r\n      return evaluateQuadratic(definition.coefficients, x);\r\n    case 'absolute':\r\n      return evaluateAbsolute(definition.coefficients, x);\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n\r\nconst describeFunctionExpression = definition => {\r\n  if (!definition) return 'y = ?';\r\n  switch (definition.subtype) {\r\n    case 'linear': {\r\n      const { m = 1, b = 0 } = definition.coefficients;\r\n      const slopeText = m === 1 ? 'x' : m === -1 ? '-x' : `${formatNumber(m)}x`;\r\n      const interceptText = b === 0 ? '' : b > 0 ? ` + ${formatNumber(b)}` : ` - ${formatNumber(Math.abs(b))}`;\r\n      return `y = ${slopeText}${interceptText}`;\r\n    }\r\n    case 'quadratic': {\r\n      const { a = 1, b = 0, c = 0 } = definition.coefficients;\r\n      const terms = [];\r\n      if (a !== 0) {\r\n        const aText = a === 1 ? '' : a === -1 ? '-' : `${formatNumber(a)}`;\r\n        terms.push(`${aText}x²`);\r\n      }\r\n      if (b !== 0) {\r\n        const sign = b > 0 ? ' + ' : ' - ';\r\n        const bText = Math.abs(b) === 1 ? '' : formatNumber(Math.abs(b));\r\n        terms.push(`${sign}${bText}x`);\r\n      }\r\n      if (c !== 0 || terms.length === 0) {\r\n        const sign = c >= 0 ? (terms.length ? ' + ' : '') : ' - ';\r\n        terms.push(`${sign}${formatNumber(Math.abs(c))}`);\r\n      }\r\n      return `y = ${terms.join('').replace(/^ \\+ /, '')}`;\r\n    }\r\n    case 'absolute': {\r\n      const { a = 1, h = 0, k = 0 } = definition.coefficients;\r\n      const aText = a === 1 ? '' : a === -1 ? '-' : `${formatNumber(a)}`;\r\n      const hText = h === 0 ? 'x' : h > 0 ? `(x - ${formatNumber(h)})` : `(x + ${formatNumber(Math.abs(h))})`;\r\n      const kText = k === 0 ? '' : k > 0 ? ` + ${formatNumber(k)}` : ` - ${formatNumber(Math.abs(k))}`;\r\n      return `y = ${aText}|${hText}|${kText}`;\r\n    }\r\n    default:\r\n      return 'y = ?';\r\n  }\r\n};\r\n\r\nconst computeAbsoluteVertex = coefficients => {\r\n  const { h = 0, k = 0 } = coefficients;\r\n  return { x: h, y: k };\r\n};\r\n\r\nconst computeQuadraticVertex = coefficients => {\r\n  const { a = 1, b = 0, c = 0 } = coefficients;\r\n  const x = -b / (2 * a);\r\n  const y = evaluateQuadratic(coefficients, x);\r\n  return { x, y };\r\n};\r\n\r\nconst sampleFunction = (definition, range, samples = 160) => {\r\n  if (!definition || !range) return [];\r\n  const [minX, maxX] = range;\r\n  const step = (maxX - minX) / (samples - 1);\r\n  const points = [];\r\n  for (let i = 0; i < samples; i += 1) {\r\n    const x = minX + step * i;\r\n    const y = evaluateFunctionAt(definition, x);\r\n    if (Number.isFinite(y)) {\r\n      points.push({ x, y });\r\n    }\r\n  }\r\n  return points;\r\n};\r\n\r\nconst determineTickStep = span => {\r\n  if (!span || !Number.isFinite(span) || span <= 0) return 1;\r\n  const raw = span / 8;\r\n  const power = Math.pow(10, Math.floor(Math.log10(raw)));\r\n  const multiples = [1, 2, 5, 10];\r\n  for (const multiplier of multiples) {\r\n    const candidate = power * multiplier;\r\n    if (candidate >= raw) {\r\n      return candidate;\r\n    }\r\n  }\r\n  return power * 10;\r\n};\r\n\r\nconst computeLineSummary = definition => {\r\n  if (!definition) return null;\r\n  if (definition.form === 'two-points') {\r\n    const [a, b] = definition.points || [];\r\n    return slopeInterceptFromPoints(a, b);\r\n  }\r\n  if (definition.form === 'standard') {\r\n    const { a = 0, b = 0, c = 0 } = definition;\r\n    if (Math.abs(b) < 1e-9) {\r\n      return { slope: Infinity, intercept: null, verticalX: -c / a };\r\n    }\r\n    const slope = -a / b;\r\n    const intercept = -c / b;\r\n    return { slope, intercept, verticalX: null };\r\n  }\r\n  const { slope = 0, intercept = 0 } = definition;\r\n  return { slope, intercept, verticalX: null };\r\n};\r\n\r\nconst isAboveComparison = comparison => comparison === '>' || comparison === '>=';\r\n\r\nconst buildInequalityRegion = comparison => ({\r\n  inclusive: comparison === '>=' || comparison === '<=',\r\n  side: isAboveComparison(comparison) ? 'above' : 'below',\r\n});\r\n\r\nconst createLineAriaLabel = (coeffs, extras = {}) => {\r\n  if (!coeffs) return 'Line';\r\n  if (Number.isFinite(coeffs.slope)) {\r\n    const slopeText = formatNumber(coeffs.slope);\r\n    const interceptText = formatNumber(coeffs.intercept);\r\n    return `Line with slope ${slopeText} and y-intercept ${interceptText}`;\r\n  }\r\n  return `Vertical line x = ${formatNumber(extras.verticalX ?? coeffs.verticalX)}`;\r\n};\r\n\r\nconst describeLineExpression = coeffs => {\r\n  if (!coeffs) return 'Line';\r\n  if (coeffs.verticalX !== null && coeffs.verticalX !== undefined) {\r\n    return `x = ${formatNumber(coeffs.verticalX)}`;\r\n  }\r\n  if (Math.abs(coeffs.slope) < 1e-9) {\r\n    return `y = ${formatNumber(coeffs.intercept)}`;\r\n  }\r\n  const slopeText = formatNumber(coeffs.slope);\r\n  const intercept = coeffs.intercept || 0;\r\n  let interceptText = '';\r\n  if (intercept > 0) {\r\n    interceptText = ` + ${formatNumber(intercept)}`;\r\n  } else if (intercept < 0) {\r\n    interceptText = ` - ${formatNumber(Math.abs(intercept))}`;\r\n  }\r\n  return `y = ${slopeText}x${interceptText}`;\r\n};\r\n\r\nconst prepareGraphObject = (object = {}) => {\r\n  const base = {\r\n    id: object.id || null,\r\n    type: object.type,\r\n    definition: { ...object.definition },\r\n    metadata: {},\r\n    ariaLabel: '',\r\n  };\r\n\r\n  switch (object.type) {\r\n    case 'point': {\r\n      const { x = 0, y = 0, label = null } = object.definition || {};\r\n      base.metadata = {\r\n        x,\r\n        y,\r\n        label,\r\n        formatted: `(${formatNumber(x)}, ${formatNumber(y)})`,\r\n      };\r\n      base.ariaLabel = `Point at (${formatNumber(x)}, ${formatNumber(y)})`;\r\n      break;\r\n    }\r\n    case 'line': {\r\n      const summary = computeLineSummary(object.definition);\r\n      base.metadata = {\r\n        ...summary,\r\n        form: object.definition.form || 'slope-intercept',\r\n        through: object.definition.points || null,\r\n        expression: describeLineExpression(summary),\r\n        xIntercept: xIntercept(summary),\r\n        yIntercept: yIntercept(summary),\r\n      };\r\n      base.ariaLabel = createLineAriaLabel(summary, { verticalX: summary.verticalX });\r\n      break;\r\n    }\r\n    case 'inequality': {\r\n      const { comparison = '>', ...rest } = object.definition || {};\r\n      const lineSummary = computeLineSummary(rest);\r\n      const region = buildInequalityRegion(comparison);\r\n      base.metadata = {\r\n        ...lineSummary,\r\n        comparison,\r\n        ...region,\r\n        expression:\r\n          lineSummary.verticalX !== null && lineSummary.verticalX !== undefined\r\n            ? (() => {\r\n                const operatorMap = {\r\n                  '>': '>',\r\n                  '>=': '≥',\r\n                  '<': '<',\r\n                  '<=': '≤',\r\n                };\r\n                const operator = operatorMap[comparison] || comparison;\r\n                return `x ${operator} ${formatNumber(lineSummary.verticalX)}`;\r\n              })()\r\n            : (() => {\r\n                const boundary = describeLineExpression(lineSummary);\r\n                const cleaned = boundary.startsWith('y = ')\r\n                  ? boundary.slice(4)\r\n                  : boundary;\r\n                return `y ${comparison} ${cleaned}`;\r\n              })(),\r\n        xIntercept: xIntercept(lineSummary),\r\n        yIntercept: yIntercept(lineSummary),\r\n      };\r\n      const directionText = region.side === 'above' ? 'above' : 'below';\r\n      base.ariaLabel = `Shaded region ${directionText} the line ${createLineAriaLabel(lineSummary)}`;\r\n      break;\r\n    }\r\n    case 'function': {\r\n      const { subtype = 'linear', coefficients = {} } = object.definition || {};\r\n      let vertex = null;\r\n      if (subtype === 'quadratic') {\r\n        vertex = computeQuadraticVertex(coefficients);\r\n      } else if (subtype === 'absolute') {\r\n        vertex = computeAbsoluteVertex(coefficients);\r\n      }\r\n      base.metadata = {\r\n        subtype,\r\n        coefficients,\r\n        expression: describeFunctionExpression({ subtype, coefficients }),\r\n        vertex,\r\n        direction:\r\n          subtype === 'quadratic'\r\n            ? coefficients.a >= 0\r\n              ? 'opens up'\r\n              : 'opens down'\r\n            : subtype === 'absolute'\r\n            ? coefficients.a >= 0\r\n              ? 'opens up'\r\n              : 'opens down'\r\n            : coefficients.m >= 0\r\n            ? 'increasing'\r\n            : 'decreasing',\r\n      };\r\n      base.ariaLabel = `${subtype.charAt(0).toUpperCase()}${subtype.slice(1)} function ${base.metadata.expression}`;\r\n      break;\r\n    }\r\n    default:\r\n      base.metadata = {};\r\n      base.ariaLabel = 'Graph object';\r\n  }\r\n\r\n  return base;\r\n};\r\n\r\nconst generateLinePoints = (coeffs, bounds) => {\r\n  if (!coeffs || !bounds) return [];\r\n  const { minX, maxX, minY, maxY } = bounds;\r\n  const points = [];\r\n\r\n  if (coeffs.verticalX !== null && coeffs.verticalX !== undefined) {\r\n    points.push({ x: coeffs.verticalX, y: minY });\r\n    points.push({ x: coeffs.verticalX, y: maxY });\r\n    return points;\r\n  }\r\n\r\n  const candidates = [];\r\n  const yAtMinX = evaluateLinear(coeffs, minX);\r\n  const yAtMaxX = evaluateLinear(coeffs, maxX);\r\n  if (yAtMinX !== null) candidates.push({ x: minX, y: yAtMinX });\r\n  if (yAtMaxX !== null) candidates.push({ x: maxX, y: yAtMaxX });\r\n\r\n  if (coeffs.slope !== 0) {\r\n    const xi = xIntercept(coeffs);\r\n    if (xi !== null && xi >= minX && xi <= maxX) {\r\n      candidates.push({ x: xi, y: 0 });\r\n    }\r\n  }\r\n  const yi = yIntercept(coeffs);\r\n  if (yi !== null && yi >= minY && yi <= maxY) {\r\n    candidates.push({ x: 0, y: yi });\r\n  }\r\n\r\n  if (candidates.length < 2) {\r\n    const mid = (minX + maxX) / 2;\r\n    const yMid = evaluateLinear(coeffs, mid);\r\n    if (yMid !== null) {\r\n      const delta = (maxX - minX) / 2;\r\n      const y1 = evaluateLinear(coeffs, mid - delta);\r\n      const y2 = evaluateLinear(coeffs, mid + delta);\r\n      if (y1 !== null) candidates.push({ x: mid - delta, y: y1 });\r\n      if (y2 !== null) candidates.push({ x: mid + delta, y: y2 });\r\n    }\r\n  }\r\n\r\n  const unique = [];\r\n  const keySet = new Set();\r\n  candidates.forEach(pt => {\r\n    const key = `${roundValue(pt.x, 6)}:${roundValue(pt.y, 6)}`;\r\n    if (!keySet.has(key)) {\r\n      keySet.add(key);\r\n      unique.push(pt);\r\n    }\r\n  });\r\n\r\n  if (unique.length < 2) return unique;\r\n\r\n  unique.sort((a, b) => a.x - b.x);\r\n  return [unique[0], unique[unique.length - 1]];\r\n};\r\n\r\nexport {\r\n  DEFAULT_MAX_DECIMALS,\r\n  buildInequalityRegion,\r\n  clampDecimals,\r\n  computeLineSummary,\r\n  computeQuadraticVertex,\r\n  createLineAriaLabel,\r\n  describeLineExpression,\r\n  determineTickStep,\r\n  describeFunctionExpression,\r\n  distance,\r\n  evaluateFunctionAt,\r\n  formatNumber,\r\n  generateLinePoints,\r\n  prepareGraphObject,\r\n  roundValue,\r\n  sampleFunction,\r\n  slopeBetweenPoints,\r\n  slopeInterceptFromPoints,\r\n};\r\n","import { prepareGraphObject } from './graphMath.js';\r\n\r\nlet nextId = 1;\r\n\r\nconst clone = value => JSON.parse(JSON.stringify(value));\r\n\r\nconst state = {\r\n  theme: 'light',\r\n  mode: 'pan',\r\n  objects: [],\r\n  selectedId: null,\r\n  aiHelpEnabled: false,\r\n  viewport: {\r\n    x: -12,\r\n    y: -10,\r\n    width: 24,\r\n    height: 20,\r\n  },\r\n};\r\n\r\nconst listeners = new Set();\r\n\r\nconst notify = () => {\r\n  const snapshot = clone(state);\r\n  listeners.forEach(listener => {\r\n    try {\r\n      listener(snapshot);\r\n    } catch (err) {\r\n      console.error('graphStore listener error', err);\r\n    }\r\n  });\r\n};\r\n\r\nconst subscribe = listener => {\r\n  listeners.add(listener);\r\n  return () => listeners.delete(listener);\r\n};\r\n\r\nconst getState = () => clone(state);\r\n\r\nconst addObject = (object = {}) => {\r\n  const id = object.id || `graph-object-${nextId++}`;\r\n  if (!object.type) {\r\n    throw new Error('graphStore.addObject requires a \"type\" property.');\r\n  }\r\n  const base = {\r\n    id,\r\n    type: object.type,\r\n    definition: { ...object.definition },\r\n  };\r\n  const prepared = prepareGraphObject(base);\r\n  prepared.id = id;\r\n  state.objects = [...state.objects, prepared];\r\n  state.selectedId = id;\r\n  notify();\r\n  return id;\r\n};\r\n\r\nconst updateObject = (id, partial = {}) => {\r\n  const index = state.objects.findIndex(item => item.id === id);\r\n  if (index === -1) return;\r\n  const existing = state.objects[index];\r\n  const updatedDefinition = {\r\n    ...existing.definition,\r\n    ...(partial.definition || {}),\r\n  };\r\n  const prepared = prepareGraphObject({ id, type: existing.type, definition: updatedDefinition });\r\n  state.objects = [\r\n    ...state.objects.slice(0, index),\r\n    prepared,\r\n    ...state.objects.slice(index + 1),\r\n  ];\r\n  notify();\r\n};\r\n\r\nconst setSelected = id => {\r\n  state.selectedId = id;\r\n  notify();\r\n};\r\n\r\nconst setMode = mode => {\r\n  state.mode = mode;\r\n  notify();\r\n};\r\n\r\nconst setTheme = theme => {\r\n  state.theme = theme === 'dark' ? 'dark' : 'light';\r\n  notify();\r\n};\r\n\r\nconst setAIHelpEnabled = enabled => {\r\n  state.aiHelpEnabled = !!enabled;\r\n  notify();\r\n};\r\n\r\nconst getAIHelpEnabled = () => state.aiHelpEnabled;\r\n\r\nconst getAllObjects = () => clone(state.objects);\r\n\r\nconst setViewport = nextViewport => {\r\n  if (!nextViewport) return;\r\n  state.viewport = {\r\n    ...state.viewport,\r\n    ...nextViewport,\r\n  };\r\n  notify();\r\n};\r\n\r\nconst exportScene = () => ({\r\n  theme: state.theme,\r\n  mode: state.mode,\r\n  selectedId: state.selectedId,\r\n  aiHelpEnabled: state.aiHelpEnabled,\r\n  viewport: clone(state.viewport),\r\n  objects: clone(state.objects),\r\n});\r\n\r\nexport {\r\n  addObject,\r\n  exportScene,\r\n  getAIHelpEnabled,\r\n  getAllObjects,\r\n  getState,\r\n  setAIHelpEnabled,\r\n  setMode,\r\n  setSelected,\r\n  setTheme,\r\n  setViewport,\r\n  subscribe,\r\n  updateObject,\r\n};\r\n","import {\r\n  addObject,\r\n  getState,\r\n  setMode,\r\n  setTheme,\r\n  setViewport,\r\n  subscribe,\r\n} from './graphStore.js';\r\n\r\nconst ensureStyles = () => {\r\n  if (document.getElementById('graph-toolbar-styles')) return;\r\n  const style = document.createElement('style');\r\n  style.id = 'graph-toolbar-styles';\r\n  style.textContent = `\r\n    .graph-toolbar {\r\n      display: grid;\r\n      gap: 12px;\r\n      padding: 16px;\r\n      background: #ffffff;\r\n      border-radius: 16px;\r\n      box-shadow: 0 20px 48px rgba(15, 23, 42, 0.18);\r\n      backdrop-filter: blur(12px);\r\n      color: #000000;\r\n    }\r\n    .graph-toolbar.dark {\r\n      background: rgba(15, 23, 42, 0.78);\r\n      color: #e2e8f0;\r\n      box-shadow: 0 22px 50px rgba(13, 148, 136, 0.22);\r\n    }\r\n    .graph-toolbar .toolbar-row {\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      gap: 8px;\r\n      align-items: center;\r\n    }\r\n    .graph-toolbar button,\r\n    .graph-toolbar select {\r\n      appearance: none;\r\n      border: none;\r\n      border-radius: 12px;\r\n      padding: 8px 14px;\r\n      font-size: 14px;\r\n      font-weight: 600;\r\n      cursor: pointer;\r\n      transition: transform 120ms ease, box-shadow 120ms ease, background 120ms ease;\r\n      background: #ffffff;\r\n      color: inherit;\r\n      box-shadow: inset 0 1px 0 rgba(148, 163, 184, 0.22);\r\n    }\r\n    .graph-toolbar.dark button,\r\n    .graph-toolbar.dark select {\r\n      background: rgba(15, 23, 42, 0.88);\r\n      box-shadow: inset 0 1px 0 rgba(56, 189, 248, 0.28);\r\n    }\r\n    .graph-toolbar button.active {\r\n      background: linear-gradient(120deg, #0ea5e9, #22d3ee);\r\n      color: #0b1120;\r\n      box-shadow: 0 12px 24px rgba(14, 165, 233, 0.3);\r\n    }\r\n    .graph-toolbar button:hover {\r\n      transform: translateY(-1px);\r\n    }\r\n    .graph-toolbar details {\r\n      background: #ffffff;\r\n      border-radius: 14px;\r\n      padding: 12px 14px;\r\n      box-shadow: inset 0 1px 0 rgba(148, 163, 184, 0.2);\r\n    }\r\n    .graph-toolbar.dark details {\r\n      background: rgba(15, 23, 42, 0.88);\r\n      box-shadow: inset 0 1px 0 rgba(56, 189, 248, 0.2);\r\n    }\r\n    .graph-toolbar details summary {\r\n      font-weight: 700;\r\n      cursor: pointer;\r\n      margin-bottom: 8px;\r\n    }\r\n    .graph-toolbar form {\r\n      display: grid;\r\n      gap: 8px;\r\n      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\r\n    }\r\n    .graph-toolbar .function-coefficients {\r\n      display: grid;\r\n      gap: 8px;\r\n      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\r\n    }\r\n    .graph-toolbar label {\r\n      display: grid;\r\n      gap: 4px;\r\n      font-size: 13px;\r\n    }\r\n    .graph-toolbar input {\r\n      border: 1px solid rgba(148, 163, 184, 0.4);\r\n      border-radius: 10px;\r\n      padding: 6px 10px;\r\n      font-size: 14px;\r\n      background: #ffffff;\r\n      color: inherit;\r\n    }\r\n    .graph-toolbar.dark input {\r\n      background: rgba(15, 23, 42, 0.92);\r\n      border-color: rgba(56, 189, 248, 0.35);\r\n      color: inherit;\r\n    }\r\n    .graph-toolbar .form-actions {\r\n      grid-column: 1 / -1;\r\n      display: flex;\r\n      justify-content: flex-end;\r\n    }\r\n    .graph-toolbar .form-actions button {\r\n      background: linear-gradient(120deg, #0ea5e9, #38bdf8);\r\n      color: #0b1120;\r\n      box-shadow: 0 10px 22px rgba(14, 165, 233, 0.3);\r\n    }\r\n  `;\r\n  document.head.appendChild(style);\r\n};\r\n\r\nconst parseNumber = value => {\r\n  const num = parseFloat(value);\r\n  return Number.isFinite(num) ? num : 0;\r\n};\r\n\r\nclass GraphToolbar {\r\n  constructor(container) {\r\n    if (!container) throw new Error('GraphToolbar requires a mount container');\r\n    ensureStyles();\r\n    this.container = container;\r\n    this.state = getState();\r\n    this.root = document.createElement('div');\r\n    this.root.className = 'graph-toolbar';\r\n    this.container.appendChild(this.root);\r\n\r\n    this.render();\r\n    this.unsubscribe = subscribe(snapshot => {\r\n      this.state = snapshot;\r\n      this.render();\r\n    });\r\n  }\r\n\r\n  destroy() {\r\n    this.unsubscribe?.();\r\n    this.root.remove();\r\n  }\r\n\r\n  render() {\r\n    this.root.classList.toggle('dark', this.state.theme === 'dark');\r\n    this.root.replaceChildren(this.renderPrimaryRow(), this.renderFormsSection());\r\n  }\r\n\r\n  renderPrimaryRow() {\r\n    const row = document.createElement('div');\r\n    row.className = 'toolbar-row';\r\n\r\n    row.appendChild(this.createModeButton('pan', 'Move / Pan'));\r\n    row.appendChild(this.createModeButton('add-point', 'Add Point'));\r\n    row.appendChild(this.createModeButton('trace', 'Trace / Inspect'));\r\n\r\n    const zoomIn = document.createElement('button');\r\n    zoomIn.type = 'button';\r\n    zoomIn.textContent = 'Zoom In';\r\n    zoomIn.addEventListener('click', () => this.adjustZoom(0.9));\r\n    row.appendChild(zoomIn);\r\n\r\n    const zoomOut = document.createElement('button');\r\n    zoomOut.type = 'button';\r\n    zoomOut.textContent = 'Zoom Out';\r\n    zoomOut.addEventListener('click', () => this.adjustZoom(1.1));\r\n    row.appendChild(zoomOut);\r\n\r\n    const themeSelect = document.createElement('select');\r\n    themeSelect.innerHTML = '<option value=\"light\">Light</option><option value=\"dark\">Dark</option>';\r\n    themeSelect.value = this.state.theme;\r\n    themeSelect.addEventListener('change', evt => setTheme(evt.target.value));\r\n    row.appendChild(themeSelect);\r\n\r\n    return row;\r\n  }\r\n\r\n  createModeButton(mode, label) {\r\n    const button = document.createElement('button');\r\n    button.type = 'button';\r\n    button.textContent = label;\r\n    button.classList.toggle('active', this.state.mode === mode);\r\n    button.addEventListener('click', () => setMode(mode));\r\n    return button;\r\n  }\r\n\r\n  adjustZoom(multiplier) {\r\n    const state = getState();\r\n    const view = state.viewport;\r\n    const newWidth = view.width * multiplier;\r\n    const newHeight = view.height * multiplier;\r\n    const centerX = view.x + view.width / 2;\r\n    const centerY = view.y + view.height / 2;\r\n    setViewport({\r\n      x: centerX - newWidth / 2,\r\n      y: centerY - newHeight / 2,\r\n      width: newWidth,\r\n      height: newHeight,\r\n    });\r\n  }\r\n\r\n  renderFormsSection() {\r\n    const wrapper = document.createElement('div');\r\n    wrapper.className = 'toolbar-forms';\r\n    wrapper.appendChild(this.createPointForm());\r\n    wrapper.appendChild(this.createSlopeForm());\r\n    wrapper.appendChild(this.createTwoPointForm());\r\n    wrapper.appendChild(this.createInequalityForm());\r\n    wrapper.appendChild(this.createFunctionForm());\r\n    return wrapper;\r\n  }\r\n\r\n  createPointForm() {\r\n    const details = document.createElement('details');\r\n    details.open = true;\r\n    const summary = document.createElement('summary');\r\n    summary.textContent = 'Plot a Point';\r\n    details.appendChild(summary);\r\n\r\n    const form = document.createElement('form');\r\n    const xLabel = document.createElement('label');\r\n    xLabel.textContent = 'x-coordinate';\r\n    const xInput = document.createElement('input');\r\n    xInput.type = 'number';\r\n    xInput.step = '0.1';\r\n    xInput.required = true;\r\n    xLabel.appendChild(xInput);\r\n\r\n    const yLabel = document.createElement('label');\r\n    yLabel.textContent = 'y-coordinate';\r\n    const yInput = document.createElement('input');\r\n    yInput.type = 'number';\r\n    yInput.step = '0.1';\r\n    yInput.required = true;\r\n    yLabel.appendChild(yInput);\r\n\r\n    const actions = document.createElement('div');\r\n    actions.className = 'form-actions';\r\n    const addButton = document.createElement('button');\r\n    addButton.type = 'submit';\r\n    addButton.textContent = 'Add Point';\r\n    actions.appendChild(addButton);\r\n\r\n    form.appendChild(xLabel);\r\n    form.appendChild(yLabel);\r\n    form.appendChild(actions);\r\n\r\n    form.addEventListener('submit', evt => {\r\n      evt.preventDefault();\r\n      setMode('add-point');\r\n      addObject({\r\n        type: 'point',\r\n        definition: { x: parseNumber(xInput.value), y: parseNumber(yInput.value) },\r\n      });\r\n      setMode('pan');\r\n      form.reset();\r\n    });\r\n\r\n    details.appendChild(form);\r\n    return details;\r\n  }\r\n\r\n  createSlopeForm() {\r\n    const details = document.createElement('details');\r\n    const summary = document.createElement('summary');\r\n    summary.textContent = 'Line: slope-intercept';\r\n    details.appendChild(summary);\r\n\r\n    const form = document.createElement('form');\r\n    const slopeLabel = document.createElement('label');\r\n    slopeLabel.textContent = 'Slope (m)';\r\n    const slopeInput = document.createElement('input');\r\n    slopeInput.type = 'number';\r\n    slopeInput.step = '0.1';\r\n    slopeInput.value = '1';\r\n    slopeLabel.appendChild(slopeInput);\r\n\r\n    const interceptLabel = document.createElement('label');\r\n    interceptLabel.textContent = 'Y-intercept (b)';\r\n    const interceptInput = document.createElement('input');\r\n    interceptInput.type = 'number';\r\n    interceptInput.step = '0.1';\r\n    interceptInput.value = '0';\r\n    interceptLabel.appendChild(interceptInput);\r\n\r\n    const actions = document.createElement('div');\r\n    actions.className = 'form-actions';\r\n    const submit = document.createElement('button');\r\n    submit.type = 'submit';\r\n    submit.textContent = 'Add Line';\r\n    actions.appendChild(submit);\r\n\r\n    form.appendChild(slopeLabel);\r\n    form.appendChild(interceptLabel);\r\n    form.appendChild(actions);\r\n\r\n    form.addEventListener('submit', evt => {\r\n      evt.preventDefault();\r\n      setMode('add-line');\r\n      addObject({\r\n        type: 'line',\r\n        definition: {\r\n          form: 'slope-intercept',\r\n          slope: parseNumber(slopeInput.value),\r\n          intercept: parseNumber(interceptInput.value),\r\n        },\r\n      });\r\n      setMode('pan');\r\n    });\r\n\r\n    details.appendChild(form);\r\n    return details;\r\n  }\r\n\r\n  createTwoPointForm() {\r\n    const details = document.createElement('details');\r\n    const summary = document.createElement('summary');\r\n    summary.textContent = 'Line: through two points';\r\n    details.appendChild(summary);\r\n\r\n    const form = document.createElement('form');\r\n    const inputs = ['x₁', 'y₁', 'x₂', 'y₂'].map(label => {\r\n      const wrapper = document.createElement('label');\r\n      wrapper.textContent = label;\r\n      const input = document.createElement('input');\r\n      input.type = 'number';\r\n      input.step = '0.1';\r\n      wrapper.appendChild(input);\r\n      form.appendChild(wrapper);\r\n      return input;\r\n    });\r\n\r\n    const actions = document.createElement('div');\r\n    actions.className = 'form-actions';\r\n    const submit = document.createElement('button');\r\n    submit.type = 'submit';\r\n    submit.textContent = 'Add Line';\r\n    actions.appendChild(submit);\r\n    form.appendChild(actions);\r\n\r\n    form.addEventListener('submit', evt => {\r\n      evt.preventDefault();\r\n      const [x1, y1, x2, y2] = inputs.map(input => parseNumber(input.value));\r\n      if (x1 === x2 && y1 === y2) return;\r\n      setMode('add-line');\r\n      addObject({\r\n        type: 'line',\r\n        definition: {\r\n          form: 'two-points',\r\n          points: [\r\n            { x: x1, y: y1 },\r\n            { x: x2, y: y2 },\r\n          ],\r\n        },\r\n      });\r\n      setMode('pan');\r\n    });\r\n\r\n    details.appendChild(form);\r\n    return details;\r\n  }\r\n\r\n  createInequalityForm() {\r\n    const details = document.createElement('details');\r\n    const summary = document.createElement('summary');\r\n    summary.textContent = 'Linear inequality';\r\n    details.appendChild(summary);\r\n\r\n    const form = document.createElement('form');\r\n\r\n    const comparisonLabel = document.createElement('label');\r\n    comparisonLabel.textContent = 'Comparison';\r\n    const select = document.createElement('select');\r\n    ['>', '>=', '<', '<='].forEach(symbol => {\r\n      const option = document.createElement('option');\r\n      option.value = symbol;\r\n      option.textContent = symbol;\r\n      select.appendChild(option);\r\n    });\r\n    comparisonLabel.appendChild(select);\r\n\r\n    const slopeLabel = document.createElement('label');\r\n    slopeLabel.textContent = 'Slope (m)';\r\n    const slopeInput = document.createElement('input');\r\n    slopeInput.type = 'number';\r\n    slopeInput.step = '0.1';\r\n    slopeInput.value = '1';\r\n    slopeLabel.appendChild(slopeInput);\r\n\r\n    const interceptLabel = document.createElement('label');\r\n    interceptLabel.textContent = 'Y-intercept (b)';\r\n    const interceptInput = document.createElement('input');\r\n    interceptInput.type = 'number';\r\n    interceptInput.step = '0.1';\r\n    interceptInput.value = '0';\r\n    interceptLabel.appendChild(interceptInput);\r\n\r\n    const actions = document.createElement('div');\r\n    actions.className = 'form-actions';\r\n    const submit = document.createElement('button');\r\n    submit.type = 'submit';\r\n    submit.textContent = 'Add Inequality';\r\n    actions.appendChild(submit);\r\n\r\n    form.appendChild(comparisonLabel);\r\n    form.appendChild(slopeLabel);\r\n    form.appendChild(interceptLabel);\r\n    form.appendChild(actions);\r\n\r\n    form.addEventListener('submit', evt => {\r\n      evt.preventDefault();\r\n      setMode('add-inequality');\r\n      addObject({\r\n        type: 'inequality',\r\n        definition: {\r\n          comparison: select.value,\r\n          form: 'slope-intercept',\r\n          slope: parseNumber(slopeInput.value),\r\n          intercept: parseNumber(interceptInput.value),\r\n        },\r\n      });\r\n      setMode('pan');\r\n    });\r\n\r\n    details.appendChild(form);\r\n    return details;\r\n  }\r\n\r\n  createFunctionForm() {\r\n    const details = document.createElement('details');\r\n    const summary = document.createElement('summary');\r\n    summary.textContent = 'Function y = f(x)';\r\n    details.appendChild(summary);\r\n\r\n    const form = document.createElement('form');\r\n\r\n    const typeLabel = document.createElement('label');\r\n    typeLabel.textContent = 'Type';\r\n    const typeSelect = document.createElement('select');\r\n    typeSelect.innerHTML = '<option value=\"linear\">Linear (mx + b)</option><option value=\"quadratic\">Quadratic (ax² + bx + c)</option><option value=\"absolute\">Absolute a|x - h| + k</option>';\r\n    typeLabel.appendChild(typeSelect);\r\n\r\n    const coefficientWrapper = document.createElement('div');\r\n    coefficientWrapper.className = 'function-coefficients';\r\n\r\n    const renderCoefficientInputs = () => {\r\n      coefficientWrapper.replaceChildren();\r\n      if (typeSelect.value === 'linear') {\r\n        coefficientWrapper.appendChild(this.createNumberInput('Slope (m)', '1'));\r\n        coefficientWrapper.appendChild(this.createNumberInput('Intercept (b)', '0'));\r\n      } else if (typeSelect.value === 'quadratic') {\r\n        coefficientWrapper.appendChild(this.createNumberInput('a', '1'));\r\n        coefficientWrapper.appendChild(this.createNumberInput('b', '0'));\r\n        coefficientWrapper.appendChild(this.createNumberInput('c', '0'));\r\n      } else {\r\n        coefficientWrapper.appendChild(this.createNumberInput('a', '1'));\r\n        coefficientWrapper.appendChild(this.createNumberInput('h', '0'));\r\n        coefficientWrapper.appendChild(this.createNumberInput('k', '0'));\r\n      }\r\n    };\r\n\r\n    typeSelect.addEventListener('change', renderCoefficientInputs);\r\n    renderCoefficientInputs();\r\n\r\n    const actions = document.createElement('div');\r\n    actions.className = 'form-actions';\r\n    const submit = document.createElement('button');\r\n    submit.type = 'submit';\r\n    submit.textContent = 'Add Function';\r\n    actions.appendChild(submit);\r\n\r\n    form.appendChild(typeLabel);\r\n    form.appendChild(coefficientWrapper);\r\n    form.appendChild(actions);\r\n\r\n    form.addEventListener('submit', evt => {\r\n      evt.preventDefault();\r\n      const inputs = Array.from(coefficientWrapper.querySelectorAll('input'));\r\n      const values = inputs.map(input => parseNumber(input.value));\r\n      const subtype = typeSelect.value;\r\n      let coefficients = {};\r\n      if (subtype === 'linear') {\r\n        const [m = 1, b = 0] = values;\r\n        coefficients = { m, b };\r\n      } else if (subtype === 'quadratic') {\r\n        const [a = 1, b = 0, c = 0] = values;\r\n        coefficients = { a, b, c };\r\n      } else {\r\n        const [a = 1, h = 0, k = 0] = values;\r\n        coefficients = { a, h, k };\r\n      }\r\n      setMode('add-function');\r\n      addObject({\r\n        type: 'function',\r\n        definition: {\r\n          subtype,\r\n          coefficients,\r\n        },\r\n      });\r\n      setMode('pan');\r\n    });\r\n\r\n    details.appendChild(form);\r\n    return details;\r\n  }\r\n\r\n  createNumberInput(labelText, defaultValue = '0') {\r\n    const label = document.createElement('label');\r\n    label.textContent = labelText;\r\n    const input = document.createElement('input');\r\n    input.type = 'number';\r\n    input.step = '0.1';\r\n    input.value = defaultValue;\r\n    label.appendChild(input);\r\n    return label;\r\n  }\r\n}\r\n\r\nexport default GraphToolbar;\r\n","import {\r\n  addObject,\r\n  getState,\r\n  setMode,\r\n  setSelected,\r\n  setViewport,\r\n  subscribe,\r\n} from './graphStore.js';\r\nimport GraphToolbar from './GraphToolbar.js';\r\nimport {\r\n  determineTickStep,\r\n  evaluateFunctionAt,\r\n  formatNumber,\r\n  generateLinePoints,\r\n  sampleFunction,\r\n} from './graphMath.js';\r\n\r\nconst SVG_NS = 'http://www.w3.org/2000/svg';\r\n\r\nconst THEME_TOKENS = {\r\n  light: {\r\n    background: '#ffffff',\r\n    grid: '#e5e5e5',\r\n    axis: '#111827',\r\n    axisLabel: '#111827',\r\n    highlight: '#0ea5e9',\r\n    objectStroke: '#1f2937',\r\n    objectFill: 'rgba(14, 165, 233, 0.12)',\r\n    shadeFill: 'rgba(14, 165, 233, 0.12)',\r\n    trace: '#111827',\r\n  },\r\n  dark: {\r\n    background: '#020617',\r\n    grid: 'rgba(14, 165, 233, 0.22)',\r\n    axis: '#f8fafc',\r\n    axisLabel: '#f8fafc',\r\n    highlight: '#38bdf8',\r\n    objectStroke: '#ffffff',\r\n    objectFill: 'rgba(56, 189, 248, 0.18)',\r\n    shadeFill: 'rgba(56, 189, 248, 0.16)',\r\n    trace: '#f8fafc',\r\n  },\r\n};\r\n\r\nconst ensureStyles = () => {\r\n  if (document.getElementById('graph-canvas-styles')) return;\r\n  const style = document.createElement('style');\r\n  style.id = 'graph-canvas-styles';\r\n  style.textContent = `\r\n    .graph-canvas-root {\r\n      position: relative;\r\n      width: 100%;\r\n      height: 100%;\r\n      border-radius: 16px;\r\n      overflow: hidden;\r\n      box-shadow: 0 28px 60px rgba(15, 23, 42, 0.22);\r\n      background: var(--graph-canvas-background, #ffffff);\r\n      transition: background 180ms ease;\r\n      touch-action: none;\r\n      user-select: none;\r\n    }\r\n    .graph-canvas-svg {\r\n      width: 100%;\r\n      height: 100%;\r\n      display: block;\r\n    }\r\n    .graph-grid-line {\r\n      stroke-width: 0.015;\r\n    }\r\n    .graph-axis-line {\r\n      stroke-width: 0.04;\r\n    }\r\n    .graph-axis-label {\r\n      font-size: 0.35px;\r\n      font-family: 'Inter', 'Segoe UI', sans-serif;\r\n      pointer-events: none;\r\n      paint-order: stroke;\r\n      stroke: rgba(0,0,0,0.08);\r\n      stroke-width: 0.02;\r\n    }\r\n    .graph-object {\r\n      cursor: pointer;\r\n      transition: stroke 150ms ease, fill 150ms ease, opacity 150ms ease;\r\n      opacity: 0;\r\n      animation: graph-object-fade 150ms ease forwards;\r\n    }\r\n    .graph-object.selected {\r\n      stroke-width: 0.08 !important;\r\n      filter: drop-shadow(0 0 12px rgba(56, 189, 248, 0.6));\r\n    }\r\n    .graph-inequality-fill {\r\n      pointer-events: none;\r\n      transition: opacity 160ms ease;\r\n      opacity: 0;\r\n      animation: graph-object-fade 160ms ease forwards;\r\n    }\r\n    .graph-trace-tooltip {\r\n      position: absolute;\r\n      pointer-events: none;\r\n      background: rgba(15, 23, 42, 0.9);\r\n      color: #f8fafc;\r\n      padding: 6px 10px;\r\n      border-radius: 8px;\r\n      font-size: 12px;\r\n      font-weight: 600;\r\n      box-shadow: 0 10px 20px rgba(15, 23, 42, 0.25);\r\n      transform: translate(-50%, -120%);\r\n      white-space: nowrap;\r\n      z-index: 10;\r\n      opacity: 0;\r\n      transition: opacity 100ms ease;\r\n    }\r\n    .graph-trace-tooltip.visible {\r\n      opacity: 1;\r\n    }\r\n    @keyframes graph-object-fade {\r\n      from { opacity: 0; transform: scale(0.98); }\r\n      to { opacity: 1; transform: scale(1); }\r\n    }\r\n  `;\r\n  document.head.appendChild(style);\r\n};\r\n\r\nclass GraphCanvas {\r\n  constructor(container, options = {}) {\r\n    if (!container) throw new Error('GraphCanvas requires a mount container');\r\n    ensureStyles();\r\n    this.container = container;\r\n    this.options = options;\r\n    this.state = getState();\r\n    this.viewBox = { ...this.state.viewport };\r\n\r\n    this.root = document.createElement('div');\r\n    this.root.className = 'graph-canvas-root';\r\n    this.container.appendChild(this.root);\r\n\r\n    this.svg = document.createElementNS(SVG_NS, 'svg');\r\n    this.svg.setAttribute('class', 'graph-canvas-svg');\r\n    this.svg.setAttribute('role', 'application');\r\n    this.svg.setAttribute('aria-label', 'Interactive graphing canvas');\r\n    this.svg.setAttribute(\r\n      'viewBox',\r\n      `${this.viewBox.x} ${this.viewBox.y} ${this.viewBox.width} ${this.viewBox.height}`\r\n    );\r\n    this.root.appendChild(this.svg);\r\n\r\n    this.gridLayer = document.createElementNS(SVG_NS, 'g');\r\n    this.axesLayer = document.createElementNS(SVG_NS, 'g');\r\n    this.objectsLayer = document.createElementNS(SVG_NS, 'g');\r\n    this.overlayLayer = document.createElementNS(SVG_NS, 'g');\r\n\r\n    this.svg.appendChild(this.gridLayer);\r\n    this.svg.appendChild(this.axesLayer);\r\n    this.svg.appendChild(this.objectsLayer);\r\n    this.svg.appendChild(this.overlayLayer);\r\n\r\n    this.traceTooltip = document.createElement('div');\r\n    this.traceTooltip.className = 'graph-trace-tooltip';\r\n    this.root.appendChild(this.traceTooltip);\r\n\r\n    this.resizeObserver = new ResizeObserver(() => this.handleResize());\r\n    this.resizeObserver.observe(this.root);\r\n\r\n    this.svg.addEventListener('pointerdown', this.handlePointerDown.bind(this));\r\n    this.svg.addEventListener('pointermove', this.handlePointerMove.bind(this));\r\n    window.addEventListener('pointerup', this.handlePointerUp.bind(this));\r\n    this.svg.addEventListener('wheel', this.handleWheel.bind(this), {\r\n      passive: false,\r\n    });\r\n    this.svg.addEventListener('click', (evt) => {\r\n      if (evt.target === this.svg) {\r\n        setSelected(null);\r\n      }\r\n    });\r\n\r\n    this.panContext = null;\r\n\r\n    this.unsubscribe = subscribe((snapshot) => {\r\n      this.state = snapshot;\r\n      this.viewBox = { ...snapshot.viewport };\r\n      this.updateViewBox();\r\n      this.render();\r\n    });\r\n\r\n    // Load objects from spec if provided\r\n    if (\r\n      options.spec &&\r\n      options.spec.objects &&\r\n      Array.isArray(options.spec.objects)\r\n    ) {\r\n      options.spec.objects.forEach((obj) => {\r\n        try {\r\n          addObject(obj);\r\n        } catch (e) {\r\n          console.warn('[GraphCanvas] Failed to add object from spec:', e);\r\n        }\r\n      });\r\n    }\r\n\r\n    this.render();\r\n  }\r\n\r\n  destroy() {\r\n    this.unsubscribe?.();\r\n    this.resizeObserver?.disconnect();\r\n    this.root.remove();\r\n  }\r\n\r\n  handleResize() {\r\n    const { width, height } = this.root.getBoundingClientRect();\r\n    if (height === 0 || width === 0) return;\r\n    const aspect = width / height;\r\n    const nextHeight = this.viewBox.width / aspect;\r\n    if (Number.isFinite(nextHeight)) {\r\n      const centerY = this.viewBox.y + this.viewBox.height / 2;\r\n      this.viewBox.height = nextHeight;\r\n      this.viewBox.y = centerY - nextHeight / 2;\r\n      setViewport(this.viewBox);\r\n    }\r\n  }\r\n\r\n  handlePointerDown(evt) {\r\n    const point = this.screenToGraph(evt);\r\n    const mode = this.state.mode;\r\n    if (mode === 'add-point') {\r\n      addObject({\r\n        type: 'point',\r\n        definition: { x: point.x, y: point.y },\r\n      });\r\n      setMode('pan');\r\n      return;\r\n    }\r\n\r\n    if (mode === 'pan' || mode === 'trace') {\r\n      this.panContext = {\r\n        startX: evt.clientX,\r\n        startY: evt.clientY,\r\n        origin: { ...this.viewBox },\r\n      };\r\n      this.svg.setPointerCapture(evt.pointerId);\r\n    }\r\n  }\r\n\r\n  handlePointerMove(evt) {\r\n    if (this.state.mode === 'trace') {\r\n      this.updateTraceTooltip(evt);\r\n    } else {\r\n      this.hideTraceTooltip();\r\n    }\r\n\r\n    if (!this.panContext) return;\r\n    const { startX, startY, origin } = this.panContext;\r\n    const dx = evt.clientX - startX;\r\n    const dy = evt.clientY - startY;\r\n    const bounds = this.root.getBoundingClientRect();\r\n    const scaleX = origin.width / bounds.width;\r\n    const scaleY = origin.height / bounds.height;\r\n    const nextViewBox = {\r\n      x: origin.x - dx * scaleX,\r\n      y: origin.y + dy * scaleY,\r\n      width: origin.width,\r\n      height: origin.height,\r\n    };\r\n    this.viewBox = nextViewBox;\r\n    setViewport(nextViewBox);\r\n  }\r\n\r\n  handlePointerUp(evt) {\r\n    if (this.panContext) {\r\n      this.svg.releasePointerCapture(evt.pointerId);\r\n      this.panContext = null;\r\n    }\r\n    this.hideTraceTooltip();\r\n  }\r\n\r\n  handleWheel(evt) {\r\n    if (!evt.ctrlKey) return;\r\n    evt.preventDefault();\r\n    const delta = evt.deltaY > 0 ? 1.1 : 0.9;\r\n    const mouse = this.screenToGraph(evt);\r\n    const newWidth = this.viewBox.width * delta;\r\n    const newHeight = this.viewBox.height * delta;\r\n    const focusXRatio = (mouse.x - this.viewBox.x) / this.viewBox.width;\r\n    const focusYRatio = (mouse.y - this.viewBox.y) / this.viewBox.height;\r\n    this.viewBox = {\r\n      x: mouse.x - newWidth * focusXRatio,\r\n      y: mouse.y - newHeight * focusYRatio,\r\n      width: newWidth,\r\n      height: newHeight,\r\n    };\r\n    setViewport(this.viewBox);\r\n  }\r\n\r\n  updateViewBox() {\r\n    this.svg.setAttribute(\r\n      'viewBox',\r\n      `${this.viewBox.x} ${this.viewBox.y} ${this.viewBox.width} ${this.viewBox.height}`\r\n    );\r\n    this.root.style.setProperty(\r\n      '--graph-canvas-background',\r\n      THEME_TOKENS[this.state.theme].background\r\n    );\r\n  }\r\n\r\n  screenToGraph(evt) {\r\n    const bounds = this.root.getBoundingClientRect();\r\n    const xRatio = (evt.clientX - bounds.left) / bounds.width;\r\n    const yRatio = (evt.clientY - bounds.top) / bounds.height;\r\n    const x = this.viewBox.x + this.viewBox.width * xRatio;\r\n    const y = this.viewBox.y + this.viewBox.height * yRatio;\r\n    return { x, y: this.invertY(y) };\r\n  }\r\n\r\n  invertY(svgY) {\r\n    const top = this.viewBox.y;\r\n    const bottom = this.viewBox.y + this.viewBox.height;\r\n    return bottom - (svgY - top);\r\n  }\r\n\r\n  graphToSvg(point) {\r\n    return {\r\n      x: point.x,\r\n      y: this.viewBox.y + this.viewBox.height - (point.y - this.viewBox.y),\r\n    };\r\n  }\r\n\r\n  hideTraceTooltip() {\r\n    this.traceTooltip.classList.remove('visible');\r\n  }\r\n\r\n  updateTraceTooltip(evt) {\r\n    const functions = this.state.objects.filter(\r\n      (obj) => obj.type === 'function' || obj.type === 'line'\r\n    );\r\n    if (functions.length === 0) {\r\n      this.hideTraceTooltip();\r\n      return;\r\n    }\r\n    const selected = this.state.objects.find(\r\n      (obj) =>\r\n        obj.id === this.state.selectedId &&\r\n        (obj.type === 'function' || obj.type === 'line')\r\n    );\r\n    const target = selected || functions[0];\r\n    const graphPoint = this.screenToGraph(evt);\r\n    let yValue = null;\r\n    if (target.type === 'line') {\r\n      const { metadata } = target;\r\n      if (metadata.verticalX !== null && metadata.verticalX !== undefined) {\r\n        yValue = null;\r\n      } else {\r\n        yValue = metadata.slope * graphPoint.x + metadata.intercept;\r\n      }\r\n    } else {\r\n      yValue = evaluateFunctionAt(\r\n        {\r\n          subtype: target.metadata.subtype,\r\n          coefficients: target.metadata.coefficients,\r\n        },\r\n        graphPoint.x\r\n      );\r\n    }\r\n    if (yValue === null || !Number.isFinite(yValue)) {\r\n      this.hideTraceTooltip();\r\n      return;\r\n    }\r\n    const bounds = this.root.getBoundingClientRect();\r\n    this.traceTooltip.textContent = `(${formatNumber(\r\n      graphPoint.x\r\n    )}, ${formatNumber(yValue)})`;\r\n    this.traceTooltip.style.left = `${evt.clientX - bounds.left}px`;\r\n    this.traceTooltip.style.top = `${evt.clientY - bounds.top}px`;\r\n    this.traceTooltip.classList.add('visible');\r\n  }\r\n\r\n  render() {\r\n    const theme = THEME_TOKENS[this.state.theme];\r\n    this.root.style.setProperty('--graph-canvas-background', theme.background);\r\n    this.traceTooltip.style.background =\r\n      this.state.theme === 'dark'\r\n        ? 'rgba(15, 23, 42, 0.92)'\r\n        : 'rgba(255, 255, 255, 0.95)';\r\n    this.traceTooltip.style.color =\r\n      this.state.theme === 'dark' ? '#f8fafc' : '#0f172a';\r\n    this.traceTooltip.style.boxShadow =\r\n      this.state.theme === 'dark'\r\n        ? '0 12px 24px rgba(14, 165, 233, 0.25)'\r\n        : '0 12px 24px rgba(15, 23, 42, 0.18)';\r\n    this.renderGrid(theme);\r\n    this.renderAxes(theme);\r\n    this.renderObjects(theme);\r\n  }\r\n\r\n  getGraphBounds() {\r\n    const minX = this.viewBox.x;\r\n    const maxX = this.viewBox.x + this.viewBox.width;\r\n    const maxY = this.invertY(this.viewBox.y);\r\n    const minY = this.invertY(this.viewBox.y + this.viewBox.height);\r\n    return { minX, maxX, minY, maxY };\r\n  }\r\n\r\n  renderGrid(theme) {\r\n    const step = determineTickStep(this.viewBox.width);\r\n    this.gridLayer.replaceChildren();\r\n    const minX = this.viewBox.x;\r\n    const maxX = this.viewBox.x + this.viewBox.width;\r\n    const minY = this.viewBox.y;\r\n    const maxY = this.viewBox.y + this.viewBox.height;\r\n\r\n    const startX = Math.floor(minX / step) * step;\r\n    const startY = Math.floor(minY / step) * step;\r\n\r\n    for (let x = startX; x <= maxX; x += step) {\r\n      const line = document.createElementNS(SVG_NS, 'line');\r\n      line.setAttribute('x1', `${x}`);\r\n      line.setAttribute('x2', `${x}`);\r\n      line.setAttribute('y1', `${minY}`);\r\n      line.setAttribute('y2', `${maxY}`);\r\n      line.setAttribute('stroke', theme.grid);\r\n      line.setAttribute('class', 'graph-grid-line');\r\n      this.gridLayer.appendChild(line);\r\n    }\r\n\r\n    for (let y = startY; y <= maxY; y += step) {\r\n      const line = document.createElementNS(SVG_NS, 'line');\r\n      line.setAttribute('x1', `${minX}`);\r\n      line.setAttribute('x2', `${maxX}`);\r\n      line.setAttribute('y1', `${y}`);\r\n      line.setAttribute('y2', `${y}`);\r\n      line.setAttribute('stroke', theme.grid);\r\n      line.setAttribute('class', 'graph-grid-line');\r\n      this.gridLayer.appendChild(line);\r\n    }\r\n  }\r\n\r\n  renderAxes(theme) {\r\n    this.axesLayer.replaceChildren();\r\n    const axisX = document.createElementNS(SVG_NS, 'line');\r\n    axisX.setAttribute('x1', `${this.viewBox.x}`);\r\n    axisX.setAttribute('x2', `${this.viewBox.x + this.viewBox.width}`);\r\n    const zeroY = this.graphToSvg({ x: 0, y: 0 }).y;\r\n    axisX.setAttribute('y1', `${zeroY}`);\r\n    axisX.setAttribute('y2', `${zeroY}`);\r\n    axisX.setAttribute('stroke', theme.axis);\r\n    axisX.setAttribute('class', 'graph-axis-line');\r\n    this.axesLayer.appendChild(axisX);\r\n\r\n    const axisY = document.createElementNS(SVG_NS, 'line');\r\n    axisY.setAttribute('y1', `${this.viewBox.y}`);\r\n    axisY.setAttribute('y2', `${this.viewBox.y + this.viewBox.height}`);\r\n    const zeroX = this.graphToSvg({ x: 0, y: 0 }).x;\r\n    axisY.setAttribute('x1', `${zeroX}`);\r\n    axisY.setAttribute('x2', `${zeroX}`);\r\n    axisY.setAttribute('stroke', theme.axis);\r\n    axisY.setAttribute('class', 'graph-axis-line');\r\n    this.axesLayer.appendChild(axisY);\r\n\r\n    const bounds = this.getGraphBounds();\r\n    const { minX, maxX, minY, maxY } = bounds;\r\n    const xStep = determineTickStep(maxX - minX);\r\n    const yStep = determineTickStep(maxY - minY);\r\n\r\n    const labelGroup = document.createElementNS(SVG_NS, 'g');\r\n\r\n    for (let x = Math.floor(minX / xStep) * xStep; x <= maxX; x += xStep) {\r\n      const position = this.graphToSvg({ x, y: 0 });\r\n      const label = document.createElementNS(SVG_NS, 'text');\r\n      label.textContent = formatNumber(x, 2);\r\n      label.setAttribute('x', `${position.x + 0.1}`);\r\n      label.setAttribute('y', `${position.y - 0.35}`);\r\n      label.setAttribute('fill', theme.axisLabel);\r\n      label.setAttribute('class', 'graph-axis-label');\r\n      labelGroup.appendChild(label);\r\n\r\n      const tick = document.createElementNS(SVG_NS, 'line');\r\n      tick.setAttribute('x1', `${position.x}`);\r\n      tick.setAttribute('x2', `${position.x}`);\r\n      tick.setAttribute('y1', `${position.y - 0.25}`);\r\n      tick.setAttribute('y2', `${position.y + 0.25}`);\r\n      tick.setAttribute('stroke', theme.axis);\r\n      tick.setAttribute('stroke-width', '0.04');\r\n      this.axesLayer.appendChild(tick);\r\n    }\r\n\r\n    for (let y = Math.floor(minY / yStep) * yStep; y <= maxY; y += yStep) {\r\n      if (Math.abs(y) < 1e-9) continue;\r\n      const position = this.graphToSvg({ x: 0, y });\r\n      const label = document.createElementNS(SVG_NS, 'text');\r\n      label.textContent = formatNumber(y, 2);\r\n      label.setAttribute('x', `${position.x + 0.3}`);\r\n      label.setAttribute('y', `${position.y + 0.4}`);\r\n      label.setAttribute('fill', theme.axisLabel);\r\n      label.setAttribute('class', 'graph-axis-label');\r\n      labelGroup.appendChild(label);\r\n\r\n      const tick = document.createElementNS(SVG_NS, 'line');\r\n      tick.setAttribute('x1', `${position.x - 0.25}`);\r\n      tick.setAttribute('x2', `${position.x + 0.25}`);\r\n      tick.setAttribute('y1', `${position.y}`);\r\n      tick.setAttribute('y2', `${position.y}`);\r\n      tick.setAttribute('stroke', theme.axis);\r\n      tick.setAttribute('stroke-width', '0.04');\r\n      this.axesLayer.appendChild(tick);\r\n    }\r\n\r\n    this.axesLayer.appendChild(labelGroup);\r\n  }\r\n\r\n  renderObjects(theme) {\r\n    this.objectsLayer.replaceChildren();\r\n    this.state.objects.forEach((object) => {\r\n      const element = this.renderObject(object, theme);\r\n      if (element) {\r\n        element.dataset.id = object.id;\r\n        element.addEventListener('click', (evt) => {\r\n          evt.stopPropagation();\r\n          setSelected(object.id);\r\n        });\r\n        this.objectsLayer.appendChild(element);\r\n      }\r\n    });\r\n  }\r\n\r\n  renderObject(object, theme) {\r\n    switch (object.type) {\r\n      case 'point':\r\n        return this.renderPoint(object, theme);\r\n      case 'line':\r\n        return this.renderLine(object, theme);\r\n      case 'inequality':\r\n        return this.renderInequality(object, theme);\r\n      case 'function':\r\n        return this.renderFunction(object, theme);\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n\r\n  renderPoint(object, theme) {\r\n    const group = document.createElementNS(SVG_NS, 'g');\r\n    group.setAttribute(\r\n      'class',\r\n      `graph-object ${\r\n        object.id === this.state.selectedId ? 'selected' : ''\r\n      }`.trim()\r\n    );\r\n    group.setAttribute('role', 'img');\r\n    group.setAttribute('aria-label', object.ariaLabel);\r\n    const svgPoint = this.graphToSvg({\r\n      x: object.metadata.x,\r\n      y: object.metadata.y,\r\n    });\r\n    const circle = document.createElementNS(SVG_NS, 'circle');\r\n    circle.setAttribute('cx', `${svgPoint.x}`);\r\n    circle.setAttribute('cy', `${svgPoint.y}`);\r\n    circle.setAttribute('r', `${this.viewBox.width * 0.01}`);\r\n    circle.setAttribute('fill', theme.objectFill);\r\n    circle.setAttribute('stroke', theme.objectStroke);\r\n    circle.setAttribute('stroke-width', '0.05');\r\n    circle.setAttribute('aria-label', object.ariaLabel);\r\n    group.appendChild(circle);\r\n    return group;\r\n  }\r\n\r\n  renderLine(object, theme) {\r\n    const coeffs = object.metadata;\r\n    const points = generateLinePoints(coeffs, this.getGraphBounds());\r\n    if (points.length < 2) return null;\r\n    const svgA = this.graphToSvg(points[0]);\r\n    const svgB = this.graphToSvg(points[1]);\r\n    const line = document.createElementNS(SVG_NS, 'line');\r\n    line.setAttribute('x1', `${svgA.x}`);\r\n    line.setAttribute('x2', `${svgB.x}`);\r\n    line.setAttribute('y1', `${svgA.y}`);\r\n    line.setAttribute('y2', `${svgB.y}`);\r\n    line.setAttribute('stroke', theme.objectStroke);\r\n    line.setAttribute('stroke-width', '0.06');\r\n    line.setAttribute(\r\n      'class',\r\n      `graph-object ${\r\n        object.id === this.state.selectedId ? 'selected' : ''\r\n      }`.trim()\r\n    );\r\n    line.setAttribute('role', 'img');\r\n    line.setAttribute('aria-label', object.ariaLabel);\r\n    return line;\r\n  }\r\n\r\n  renderFunction(object, theme) {\r\n    const range = [this.viewBox.x, this.viewBox.x + this.viewBox.width];\r\n    const points = sampleFunction(\r\n      {\r\n        subtype: object.metadata.subtype,\r\n        coefficients: object.metadata.coefficients,\r\n      },\r\n      range,\r\n      260\r\n    );\r\n    if (points.length < 2) return null;\r\n    const polyline = document.createElementNS(SVG_NS, 'polyline');\r\n    const svgPoints = points\r\n      .filter((pt) => Number.isFinite(pt.y))\r\n      .map((pt) => {\r\n        const svgPt = this.graphToSvg(pt);\r\n        return `${svgPt.x},${svgPt.y}`;\r\n      })\r\n      .join(' ');\r\n    polyline.setAttribute('points', svgPoints);\r\n    polyline.setAttribute('fill', 'none');\r\n    polyline.setAttribute('stroke', theme.objectStroke);\r\n    polyline.setAttribute('stroke-width', '0.06');\r\n    polyline.setAttribute(\r\n      'class',\r\n      `graph-object ${\r\n        object.id === this.state.selectedId ? 'selected' : ''\r\n      }`.trim()\r\n    );\r\n    polyline.setAttribute('role', 'img');\r\n    polyline.setAttribute('aria-label', object.ariaLabel);\r\n    return polyline;\r\n  }\r\n\r\n  renderInequality(object, theme) {\r\n    const coeffs = object.metadata;\r\n    const boundary = this.renderLine({ ...object, type: 'line' }, theme);\r\n    if (!boundary) return null;\r\n    if (!coeffs.inclusive) {\r\n      boundary.setAttribute('stroke-dasharray', '0.4,0.2');\r\n    }\r\n\r\n    const polygon = this.buildInequalityPolygon(coeffs);\r\n    const group = document.createElementNS(SVG_NS, 'g');\r\n    group.setAttribute(\r\n      'class',\r\n      `graph-object ${\r\n        object.id === this.state.selectedId ? 'selected' : ''\r\n      }`.trim()\r\n    );\r\n    group.setAttribute('role', 'img');\r\n    group.setAttribute('aria-label', object.ariaLabel);\r\n    boundary.setAttribute('aria-label', object.ariaLabel);\r\n\r\n    if (polygon.length >= 3) {\r\n      const poly = document.createElementNS(SVG_NS, 'polygon');\r\n      poly.setAttribute(\r\n        'points',\r\n        polygon\r\n          .map((pt) => {\r\n            const svgPt = this.graphToSvg(pt);\r\n            return `${svgPt.x},${svgPt.y}`;\r\n          })\r\n          .join(' ')\r\n      );\r\n      poly.setAttribute('fill', theme.shadeFill);\r\n      poly.setAttribute('class', 'graph-inequality-fill');\r\n      group.appendChild(poly);\r\n    }\r\n\r\n    group.appendChild(boundary);\r\n    return group;\r\n  }\r\n\r\n  buildInequalityPolygon(coeffs) {\r\n    const { side } = coeffs;\r\n    const bounds = this.getGraphBounds();\r\n    const { minX, maxX, minY, maxY } = bounds;\r\n\r\n    const corners = [\r\n      { x: minX, y: minY },\r\n      { x: maxX, y: minY },\r\n      { x: maxX, y: maxY },\r\n      { x: minX, y: maxY },\r\n    ];\r\n\r\n    const satisfies = (x, y) => {\r\n      if (coeffs.verticalX !== null && coeffs.verticalX !== undefined) {\r\n        return side === 'above' ? x >= coeffs.verticalX : x <= coeffs.verticalX;\r\n      }\r\n      const compareValue = coeffs.slope * x + coeffs.intercept;\r\n      return side === 'above' ? y >= compareValue : y <= compareValue;\r\n    };\r\n\r\n    const points = [];\r\n    corners.forEach((pt) => {\r\n      const graphPt = { x: pt.x, y: pt.y };\r\n      if (satisfies(graphPt.x, graphPt.y)) {\r\n        points.push(graphPt);\r\n      }\r\n    });\r\n\r\n    const intersections = this.computeBoundaryIntersections(coeffs, bounds);\r\n    intersections.forEach((pt) => {\r\n      if (\r\n        !points.some(\r\n          (existing) =>\r\n            Math.abs(existing.x - pt.x) < 1e-6 &&\r\n            Math.abs(existing.y - pt.y) < 1e-6\r\n        )\r\n      ) {\r\n        points.push(pt);\r\n      }\r\n    });\r\n\r\n    if (points.length < 3) return [];\r\n    const centroid = points.reduce(\r\n      (acc, pt) => ({\r\n        x: acc.x + pt.x / points.length,\r\n        y: acc.y + pt.y / points.length,\r\n      }),\r\n      { x: 0, y: 0 }\r\n    );\r\n    points.sort(\r\n      (a, b) =>\r\n        Math.atan2(a.y - centroid.y, a.x - centroid.x) -\r\n        Math.atan2(b.y - centroid.y, b.x - centroid.x)\r\n    );\r\n    return points;\r\n  }\r\n\r\n  computeBoundaryIntersections(coeffs, bounds) {\r\n    const { minX, maxX, minY, maxY } = bounds;\r\n\r\n    const points = [];\r\n\r\n    if (coeffs.verticalX !== null && coeffs.verticalX !== undefined) {\r\n      if (coeffs.verticalX >= minX && coeffs.verticalX <= maxX) {\r\n        points.push({ x: coeffs.verticalX, y: minY });\r\n        points.push({ x: coeffs.verticalX, y: maxY });\r\n      }\r\n      return points;\r\n    }\r\n\r\n    const slope = coeffs.slope;\r\n    const intercept = coeffs.intercept;\r\n\r\n    const yAtMinX = slope * minX + intercept;\r\n    const yAtMaxX = slope * maxX + intercept;\r\n    if (yAtMinX >= minY && yAtMinX <= maxY)\r\n      points.push({ x: minX, y: yAtMinX });\r\n    if (yAtMaxX >= minY && yAtMaxX <= maxY)\r\n      points.push({ x: maxX, y: yAtMaxX });\r\n\r\n    if (Math.abs(slope) > 1e-9) {\r\n      const xAtMinY = (minY - intercept) / slope;\r\n      const xAtMaxY = (maxY - intercept) / slope;\r\n      if (xAtMinY >= minX && xAtMinY <= maxX)\r\n        points.push({ x: xAtMinY, y: minY });\r\n      if (xAtMaxY >= minX && xAtMaxY <= maxX)\r\n        points.push({ x: xAtMaxY, y: maxY });\r\n    }\r\n\r\n    return points;\r\n  }\r\n}\r\n\r\nexport default GraphCanvas;\r\n\r\n// Module API for mounting from quiz panel\r\nexport function mount(el, payload = {}) {\r\n  try {\r\n    const spec = payload.spec || payload.graphSpec || null;\r\n\r\n    // Create wrapper for canvas and toolbar\r\n    const wrapper = document.createElement('div');\r\n    wrapper.style.cssText =\r\n      'display: grid; gap: 16px; width: 100%; height: 100%;';\r\n    el.appendChild(wrapper);\r\n\r\n    // Create toolbar container\r\n    const toolbarContainer = document.createElement('div');\r\n    wrapper.appendChild(toolbarContainer);\r\n\r\n    // Create canvas container\r\n    const canvasContainer = document.createElement('div');\r\n    canvasContainer.style.cssText = 'flex: 1; min-height: 400px;';\r\n    wrapper.appendChild(canvasContainer);\r\n\r\n    // Initialize toolbar and canvas\r\n    const toolbar = new GraphToolbar(toolbarContainer);\r\n    const canvas = new GraphCanvas(canvasContainer, { spec });\r\n\r\n    // Store instances for cleanup\r\n    el.__graphToolbar = toolbar;\r\n    el.__graphCanvas = canvas;\r\n    el.__graphWrapper = wrapper;\r\n\r\n    return { toolbar, canvas };\r\n  } catch (e) {\r\n    console.warn('[GraphCanvas] mount failed:', e?.message || e);\r\n    throw e;\r\n  }\r\n}\r\n\r\nexport function unmount(el) {\r\n  try {\r\n    if (\r\n      el &&\r\n      el.__graphToolbar &&\r\n      typeof el.__graphToolbar.destroy === 'function'\r\n    ) {\r\n      el.__graphToolbar.destroy();\r\n    }\r\n    if (\r\n      el &&\r\n      el.__graphCanvas &&\r\n      typeof el.__graphCanvas.destroy === 'function'\r\n    ) {\r\n      el.__graphCanvas.destroy();\r\n    }\r\n    if (el && el.__graphWrapper) {\r\n      el.__graphWrapper.remove();\r\n    }\r\n  } catch {}\r\n  if (el) {\r\n    delete el.__graphToolbar;\r\n    delete el.__graphCanvas;\r\n    delete el.__graphWrapper;\r\n  }\r\n}\r\n"],"names":["slope","intercept","ensureStyles","state"],"mappings":"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"}